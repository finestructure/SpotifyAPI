<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SpotifyWebAPI  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="SpotifyWebAPI  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SpotifyWebAPI Docs</a> (99% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SpotifyWebAPI Reference</a>
        <img id="carat" src="img/carat.png" />
        SpotifyWebAPI  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="SpotifyAPI.html">SpotifyAPI</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/SpotifyAPI.html">SpotifyAPI</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Authorization.html">Authorization</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/AuthorizationCodeFlowPKCEManager.html">AuthorizationCodeFlowPKCEManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/AuthorizationCodeFlowManager.html">AuthorizationCodeFlowManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/AuthorizationCodeFlowManagerBase.html">AuthorizationCodeFlowManagerBase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ClientCredentialsFlowManager.html">ClientCredentialsFlowManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Scope.html">Scope</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SpotifyAuthorizationManager.html">SpotifyAuthorizationManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Authorization.html#/s:13SpotifyWebAPI0A25ScopeAuthorizationManagerP">SpotifyScopeAuthorizationManager</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Errors.html">Errors</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/SpotifyError.html">SpotifyError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyPlayerError.html">SpotifyPlayerError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyPlayerError/ErrorReason.html">â€“ ErrorReason</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SpotifyLocalError.html">SpotifyLocalError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RateLimitedError.html">RateLimitedError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyAuthenticationError.html">SpotifyAuthenticationError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyAuthorizationError.html">SpotifyAuthorizationError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyDecodingError.html">SpotifyDecodingError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Publisher%20Extensions.html">Publisher Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Publisher.html">Publisher</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Error.html">Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Publisher%20Extensions.html#/s:13SpotifyWebAPI06decodeA6Errors4data15httpURLResponses5Error_pSg10Foundation4DataV_So17NSHTTPURLResponseCtF">decodeSpotifyErrors(data:httpURLResponse:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Publisher%20Extensions.html#/s:13SpotifyWebAPI06decodeA6Object4data15httpURLResponse12responseTypex10Foundation4DataV_So17NSHTTPURLResponseCxmtKSeRzlF">decodeSpotifyObject(data:httpURLResponse:responseType:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Paginated.html">Paginated</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SpotifyURIConvertible.html">SpotifyURIConvertible</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Music%20Objects.html">Music Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Album.html">Album</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Artist.html">Artist</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Track.html">Track</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Playlist%20Objects.html">Playlist Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Playlist.html">Playlist</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PlaylistItem.html">PlaylistItem</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PlaylistItemContainer.html">PlaylistItemContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PlaylistsItemsReference.html">PlaylistsItemsReference</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Player%20Objects.html">Player Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Device.html">Device</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DeviceType.html">DeviceType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CurrentlyPlayingContext.html">CurrentlyPlayingContext</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyContext.html">SpotifyContext</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PlaybackActions.html">PlaybackActions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PlayHistory.html">PlayHistory</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ResumePoint.html">ResumePoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RepeatMode.html">RepeatMode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Podcast%20Objects.html">Podcast Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Episode.html">Episode</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Show.html">Show</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Post%20Request%20Objects.html">Post Request Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/PlaybackRequest.html">PlaybackRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ContextOption.html">ContextOption</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/OffsetOption.html">OffsetOption</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PlaylistDetails.html">PlaylistDetails</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ReorderPlaylistItems.html">ReorderPlaylistItems</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TimeReference.html">TimeReference</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/URIWithPositions.html">URIWithPositions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/URIsWithPositionsContainer.html">URIsWithPositionsContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Audio%20Analysis%20Objects.html">Audio Analysis Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AudioAnalysis.html">AudioAnalysis</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioFeatures.html">AudioFeatures</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Section.html">Section</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Segment.html">Segment</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyTimeInterval.html">SpotifyTimeInterval</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Type%20Aliases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Type%20Aliases.html#/s:13SpotifyWebAPI14PlaylistTracksa">PlaylistTracks</a>
              </li>
              <li class="nav-group-task">
                <a href="Type%20Aliases.html#/s:13SpotifyWebAPI13PlaylistItemsa">PlaylistItems</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Objects.html">Other Objects</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/PagingObject.html">PagingObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SavedItem.html">SavedItem</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SearchResult.html">SearchResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyImage.html">SpotifyImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyUser.html">SpotifyUser</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Followers.html">Followers</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CursorPagingObject.html">CursorPagingObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyCursor.html">SpotifyCursor</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TrackLink.html">TrackLink</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyCopyright.html">SpotifyCopyright</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/AlbumType.html">AlbumType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TimeRange.html">TimeRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FeaturedPlaylists.html">FeaturedPlaylists</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NewAlbumReleases.html">NewAlbumReleases</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RecommendationSeed.html">RecommendationSeed</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RecommendationsResponse.html">RecommendationsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TrackAttributes.html">TrackAttributes</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/URIsContainer.html">URIsContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Global%20Variables.html">Other Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Global%20Variables.html#/s:13SpotifyWebAPI19spotifyDecodeLogger7Logging0F0Vvp">spotifyDecodeLogger</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Endpoints.html">Endpoints</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/IDCategory.html">IDCategory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Data.html">Data</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Logger.html">Logger</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Sequence.html">Sequence</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Substring.html">Substring</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AttributeRange.html">AttributeRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyAPILogHandler.html">SpotifyAPILogHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyCategory.html">SpotifyCategory</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpotifyIdentifier.html">SpotifyIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/URIsDictWithInsertionIndex.html">URIsDictWithInsertionIndex</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='spotifyapi' class='heading'>SpotifyAPI</h1>

<p><strong>A Swift library for the Spotify web API</strong></p>
<h3 id='features' class='heading'>Features</h3>

<ul>
<li>Supports <em>all</em> of the <a href="https://developer.spotify.com/documentation/web-api/reference/">Spotify web API endpoints</a>, including playing content, creating playlists, and retrieving albums.</li>
<li>Uses Apple&rsquo;s Combine framework, which makes chaining asynchronous requests a breeze</li>
<li>Supports three different authorization methods</li>
<li>Automatically refreshes the access token when necessary</li>
</ul>

<p>Read the full <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/SpotifyAPI.html">documentation</a> and check out <a href="https://github.com/Peter-Schorn/SpotifyAPIExampleApp">this example iOS app</a> and this <a href="https://github.com/Peter-Schorn/SpotifyAPIExamples">example command-line app</a>. Additional Information is available on the <a href="https://github.com/Peter-Schorn/SpotifyAPI/wiki">wiki page</a>.</p>
<h2 id='table-of-contents' class='heading'>Table of Contents</h2>

<ul>
<li><strong><a href="#supported-platforms">Supported Platforms</a></strong></li>
<li><strong><a href="#installation">Installation</a></strong></li>
<li><strong><a href="#quick-start">Quick Start</a></strong></li>
<li><strong><a href="#authorizing-with-the-authorization-code-flow-with-proof-key-for-code-exchange">Authorizing with the Authorization Code Flow with Proof Key for Code Exchange</a></strong></li>
<li><strong><a href="#authorizing-with-the-authorization-code-flow">Authorizing with the Authorization Code Flow</a></strong><br></li>
<li><strong><a href="#authorizing-with-the-client-credentials-flow">Authorizing with the Client Credentials Flow</a></strong></li>
</ul>
<h2 id='supported-platforms' class='heading'>Supported Platforms</h2>

<ul>
<li>iOS 13+</li>
<li>macOS 10.15+</li>
<li>tvOS 13+</li>
<li>watchOS 6+</li>
<li><strong>NEW</strong>: Linux</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<ol>
<li>In Xcode, open the project that you want to add this package to.</li>
<li>From the menu bar, select File &gt; Swift Packages &gt; Add Package Dependency&hellip;</li>
<li>Paste the <a href="https://github.com/Peter-Schorn/SpotifyAPI.git">URL</a> for this repository into the search field.</li>
<li>Select the <code><a href="Classes/SpotifyAPI.html">SpotifyAPI</a></code> Library.</li>
<li>Follow the prompts for adding the package.</li>
</ol>
<h2 id='quick-start' class='heading'>Quick Start</h2>

<p>To get started, go to the <a href="https://developer.spotify.com/dashboard/login">Spotify Developer Dashboard</a> and create an app. You will receive a client id and client secret. Then, click on &ldquo;edit settings&rdquo; and add a redirect URI. Usually, this should be a custom URL scheme that redirects to a location in your app. <strong>DO NOT add a forward-slash to the end of the redirect URI</strong>.</p>

<p>The next step is authorizing your app. <em>All</em> requests to the Spotify web APIâ€”whether they require <a href="https://developer.spotify.com/documentation/general/guides/scopes/">authorization scopes</a> or notâ€”require authorization This library supports three authorization methods:</p>

<ul>
<li><p><strong><a href="#authorizing-with-the-authorization-code-flow-with-proof-key-for-code-exchange">Authorization Code Flow with Proof Key for Code Exchange</a></strong>: This is the best option for mobile and desktop applications where it is unsafe to store your client secret. It provides an additional layer of security compared to the Authorization Code Flow. Use this method if you need to access/modify user data, which requires <a href="https://developer.spotify.com/documentation/general/guides/scopes/">authorization scopes</a>. It requires the user to login to their Spotify account in a browser/web view and approve your app. Read more at the <a href="https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow-with-proof-key-for-code-exchange-pkce">Spotify web API reference</a>.</p></li>
<li><p><strong><a href="#authorizing-with-the-authorization-code-flow">Authorization Code Flow</a></strong>: Use this method if you need to access/modify user data, which requires <a href="https://developer.spotify.com/documentation/general/guides/scopes/">authorization scopes</a>. It requires the user to login to their Spotify account in a browser/web view and approve your app.  Read more at the <a href="https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow">Spotify web API reference</a>.</p></li>
<li><p><strong><a href="#authorizing-with-the-client-credentials-flow">Client Credentials Flow</a></strong>: Use this method if you do NOT need to access/modify user data. In other words, you cannot access endpoints that require <a href="https://developer.spotify.com/documentation/general/guides/scopes/">authorization scopes</a> or an access token that was issued on behalf of a user. The advantage of this method is that it does not require any user interaction.  Read more at the <a href="https://developer.spotify.com/documentation/general/guides/authorization-guide/#client-credentials-flow">Spotify web API reference</a>.</p></li>
</ul>

<p>When creating an application that uses this library, you will probably want to <strong>save the authorization information to persistent storage</strong> so that the user does not have to login again every time the application is quit and re-launched. See the <a href="https://github.com/Peter-Schorn/SpotifyAPI/wiki/Saving-authorization-information-to-persistent-storage.">Saving Authorization Information to Persistent Storage</a> wiki page for a guide on how to do this.</p>
<h2 id='authorizing-with-the-authorization-code-flow-with-proof-key-for-code-exchange' class='heading'>Authorizing with the Authorization Code Flow with Proof Key for Code Exchange</h2>

<p>Create an instance of <code><a href="Classes/SpotifyAPI.html">SpotifyAPI</a></code> and assign an instance of <code><a href="Classes/AuthorizationCodeFlowPKCEManager.html">AuthorizationCodeFlowPKCEManager</a></code> to the <code>authorizationManager</code> property:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">SpotifyWebAPI</span>

<span class="k">let</span> <span class="nv">spotify</span> <span class="o">=</span> <span class="kt">SpotifyAPI</span><span class="p">(</span>
    <span class="nv">authorizationManager</span><span class="p">:</span> <span class="kt">AuthorizationCodeFlowPKCEManager</span><span class="p">(</span>
        <span class="nv">clientId</span><span class="p">:</span> <span class="s">"Your Client Id"</span><span class="p">,</span> <span class="nv">clientSecret</span><span class="p">:</span> <span class="s">"Your Client Secret"</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>

<p>Before each authentication request your app should generate a code verifier and a code challenge. The code verifier is a cryptographically random string between 43 and 128 characters in length. It can contain letters, digits, underscores, periods, hyphens, and tildes.</p>

<p>In order to generate the code challenge, your app should hash the code verifier using the SHA256 algorithm. Then, <a href="https://tools.ietf.org/html/rfc4648#section-5">base64url</a> encode the hash that you generated. <strong>Do not include any</strong> <code>=</code> <strong>padding characters</strong> (percent-encoded or not).</p>

<p>You can use <code><a href="Extensions/String.html#/s:SS13SpotifyWebAPIE13randomURLSafe6length5usingSSSi_xztSGRzlFZ">String.randomURLSafe(length:using:)</a></code> or <code><a href="Extensions/String.html#/s:SS13SpotifyWebAPIE13randomURLSafe6lengthSSSi_tFZ">String.randomURLSafe(length:)</a></code> to generate the code verifier. You can use the <code><a href="Extensions/String.html#/s:SS13SpotifyWebAPIE17makeCodeChallengeSSyF">String.makeCodeChallenge()</a></code> instance method to create the code challenge from the code verifier. </p>

<p>For example:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">codeVerifier</span> <span class="o">=</span> <span class="kt">String</span><span class="o">.</span><span class="nf">randomURLSafe</span><span class="p">(</span><span class="nv">length</span><span class="p">:</span> <span class="mi">128</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">codeChallenge</span> <span class="o">=</span> <span class="n">codeVerifier</span><span class="o">.</span><span class="nf">makeCodeChallenge</span><span class="p">()</span>

<span class="c1">// optional, but strongly recommended</span>
<span class="k">let</span> <span class="nv">state</span> <span class="o">=</span> <span class="kt">String</span><span class="o">.</span><span class="nf">randomURLSafe</span><span class="p">(</span><span class="nv">length</span><span class="p">:</span> <span class="mi">128</span><span class="p">)</span>
</code></pre>

<p>If you use your own method to create these values, you can validate them using this <a href="https://tonyxu-io.github.io/pkce-generator/">PKCE generator tool</a>. See also <code><a href="Extensions/Data.html#/s:10Foundation4DataV13SpotifyWebAPIE22base64URLEncodedStringSSyF">Data.base64URLEncodedString()</a></code> and <code><a href="Extensions/String.html#/s:SS13SpotifyWebAPIE17urlSafeCharactersSSvpZ">String.urlSafeCharacters</a></code>.</p>

<p>Next, create the authorization URL that will be opened in a browser (or web view). When opened, it displays a permissions dialog to the user. The user can then choose to either authorize or deny authorization for your application.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">authorizationURL</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">authorizationManager</span><span class="o">.</span><span class="nf">makeAuthorizationURL</span><span class="p">(</span>
    <span class="nv">redirectURI</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"Your Redirect URI"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>
    <span class="nv">codeChallenge</span><span class="p">:</span> <span class="n">codeChallenge</span><span class="p">,</span>
    <span class="nv">state</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span>
    <span class="nv">scopes</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="n">playlistModifyPrivate</span><span class="p">,</span>
        <span class="o">.</span><span class="n">userModifyPlaybackState</span><span class="p">,</span>
        <span class="o">.</span><span class="n">playlistReadCollaborative</span><span class="p">,</span>
        <span class="o">.</span><span class="n">userReadPlaybackPosition</span>
    <span class="p">]</span>
<span class="p">)</span><span class="o">!</span>
</code></pre>

<p>See the full documentation for <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/AuthorizationCodeFlowPKCEManager.html#/s:13SpotifyWebAPI32AuthorizationCodeFlowPKCEManagerC04makeD3URL11redirectURI10showDialog13codeChallenge5state6scopes10Foundation0I0VSgAL_SbS2SSgShyAA5ScopeOGtF">makeAuthorizationURL(redirectURI:showDialog:codeChallenge:state:scopes:)</a>.</p>

<p>The redirect URI needs to have been entered in the Redirect URI whitelist that you specified when you registered your application using the <a href="https://developer.spotify.com/dashboard/login">Spotify Developer Dashboard</a>. <strong>DO NOT add a forward-slash to the end of the redirect URI.</strong></p>

<p>The documentation for each endpoint lists the <a href="https://developer.spotify.com/documentation/general/guides/scopes/">authorization scopes</a> that are required. You can always authorize your application again for different scopes, if necessary. However, this is not an additive process. You must specify all the scopes that you need each time you create the authorization URL.</p>

<p>You can decide how to open the URL. If you are creating an iOS app, the simplest method is to use <code>UIApplication.shared.open(authorizationURL)</code> to open the URL in the browser.</p>

<p>After the user either approves or denies authorization for your app, Spotify will redirect to the redirect URI that you specified when making the authorization URL with query parameters appended to it. Pass this URL into <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/AuthorizationCodeFlowPKCEManager.html#/s:13SpotifyWebAPI32AuthorizationCodeFlowPKCEManagerC29requestAccessAndRefreshTokens20redirectURIWithQuery12codeVerifier5state7Combine12AnyPublisherVyyts5Error_pG10Foundation3URLV_S2SSgtF">requestAccessAndRefreshTokens(redirectURIWithQuery:codeVerifier:state:)</a> to request the access and refresh tokens:</p>
<pre class="highlight swift"><code><span class="n">spotify</span><span class="o">.</span><span class="n">authorizationManager</span><span class="o">.</span><span class="nf">requestAccessAndRefreshTokens</span><span class="p">(</span>
    <span class="nv">redirectURIWithQuery</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
    <span class="c1">// Must match the code verifier that was used to generate the </span>
    <span class="c1">// code challenge when creating the authorization URL.</span>
    <span class="nv">codeVerifier</span><span class="p">:</span> <span class="n">codeVerifier</span><span class="p">,</span>
    <span class="c1">// Must match the value used when creating the authorization URL.</span>
    <span class="nv">state</span><span class="p">:</span> <span class="n">state</span>
<span class="p">)</span>
<span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">completion</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">finished</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"successfully authorized"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">authError</span> <span class="o">=</span> <span class="n">error</span> <span class="k">as?</span> <span class="kt">SpotifyAuthorizationError</span><span class="p">,</span> <span class="n">authError</span><span class="o">.</span><span class="n">accessWasDenied</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"The user denied the authorization request"</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"couldn't authorize application: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p>Once this publisher completes successfully, your application is authorized and you may begin making requests to the Spotify web API. <strong>Ensure that you generate a new value for the state parameter, code verifier, and code challenge before making another authorization request</strong>. The access token will be refreshed automatically when necessary. For example:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">SpotifyExampleContent</span>

<span class="k">let</span> <span class="nv">playbackRequest</span> <span class="o">=</span> <span class="kt">PlaybackRequest</span><span class="p">(</span>
    <span class="nv">context</span><span class="p">:</span> <span class="o">.</span><span class="nf">uris</span><span class="p">(</span>
        <span class="kt">URIs</span><span class="o">.</span><span class="kt">Tracks</span><span class="o">.</span><span class="nf">array</span><span class="p">(</span><span class="o">.</span><span class="n">faces</span><span class="p">,</span> <span class="o">.</span><span class="n">illWind</span><span class="p">,</span> <span class="o">.</span><span class="n">fearless</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="nv">offset</span><span class="p">:</span> <span class="o">.</span><span class="nf">uri</span><span class="p">(</span><span class="kt">URIs</span><span class="o">.</span><span class="kt">Tracks</span><span class="o">.</span><span class="n">fearless</span><span class="p">),</span>
    <span class="nv">positionMS</span><span class="p">:</span> <span class="mi">50_000</span>
<span class="p">)</span>

<span class="n">spotify</span><span class="o">.</span><span class="nf">play</span><span class="p">(</span><span class="n">playbackRequest</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">completion</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p>The full documentation for all of the endpoints can be found <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/SpotifyAPI.html">here</a>. You are also encouraged to read the <a href="https://developer.spotify.com/documentation/web-api/reference/">Spotify web API reference</a>.</p>
<h2 id='authorizing-with-the-authorization-code-flow' class='heading'>Authorizing with the Authorization Code Flow</h2>

<p>Create an instance of <code><a href="Classes/SpotifyAPI.html">SpotifyAPI</a></code> and assign an instance of <code><a href="Classes/AuthorizationCodeFlowManager.html">AuthorizationCodeFlowManager</a></code> to the <code>authorizationManager</code> property:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">SpotifyWebAPI</span>

<span class="k">let</span> <span class="nv">spotify</span> <span class="o">=</span> <span class="kt">SpotifyAPI</span><span class="p">(</span>
    <span class="nv">authorizationManager</span><span class="p">:</span> <span class="kt">AuthorizationCodeFlowManager</span><span class="p">(</span>
        <span class="nv">clientId</span><span class="p">:</span> <span class="s">"Your Client Id"</span><span class="p">,</span> <span class="nv">clientSecret</span><span class="p">:</span> <span class="s">"Your Client Secret"</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>

<p>Next, create the authorization URL that will be opened in a browser (or web view). When opened, it displays a permissions dialog to the user. The user can then choose to either authorize or deny authorization for your application.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">authorizationURL</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">authorizationManager</span><span class="o">.</span><span class="nf">makeAuthorizationURL</span><span class="p">(</span>
    <span class="nv">redirectURI</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"Your Redirect URI"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>
    <span class="nv">showDialog</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nv">scopes</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="n">playlistModifyPrivate</span><span class="p">,</span>
        <span class="o">.</span><span class="n">userModifyPlaybackState</span><span class="p">,</span>
        <span class="o">.</span><span class="n">playlistReadCollaborative</span><span class="p">,</span>
        <span class="o">.</span><span class="n">userReadPlaybackPosition</span>
    <span class="p">]</span>
<span class="p">)</span><span class="o">!</span>
</code></pre>

<p>See the full documentation for <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/AuthorizationCodeFlowManager.html#/s:13SpotifyWebAPI28AuthorizationCodeFlowManagerC04makeD3URL11redirectURI10showDialog5state6scopes10Foundation0I0VSgAK_SbSSSgShyAA5ScopeOGtF">makeAuthorizationURL(redirectURI:showDialog:state:scopes:)</a>.</p>

<p>The redirect URI needs to have been entered in the Redirect URI whitelist that you specified when you registered your application using the <a href="https://developer.spotify.com/dashboard/login">Spotify Developer Dashboard</a>. <strong>DO NOT add a forward-slash to the end of the redirect URI.</strong></p>

<p>The documentation for each endpoint lists the <a href="https://developer.spotify.com/documentation/general/guides/scopes/">authorization scopes</a> that are required. You can always authorize your application again for different scopes, if necessary. However, this is not an additive process. You must specify all the scopes that you need each time you create the authorization URL.</p>

<p>You can decide how to open the URL. If you are creating an iOS app, the simplest method is to use <code>UIApplication.shared.open(authorizationURL)</code> to open the URL in the browser.</p>

<p>After the user either approves or denies authorization for your app, Spotify will redirect to the redirect URI that you specified when making the authorization URL with query parameters appended to it. Pass this url into <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/AuthorizationCodeFlowManager.html#/s:13SpotifyWebAPI28AuthorizationCodeFlowManagerC29requestAccessAndRefreshTokens20redirectURIWithQuery5state7Combine12AnyPublisherVyyts5Error_pG10Foundation3URLV_SSSgtF">requestAccessAndRefreshTokens(redirectURIWithQuery:state:)</a> to request the access and refresh tokens:</p>
<pre class="highlight swift"><code><span class="n">spotify</span><span class="o">.</span><span class="n">authorizationManager</span><span class="o">.</span><span class="nf">requestAccessAndRefreshTokens</span><span class="p">(</span>
    <span class="nv">redirectURIWithQuery</span><span class="p">:</span> <span class="n">url</span>
<span class="p">)</span>
<span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">completion</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">finished</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"successfully authorized"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">authError</span> <span class="o">=</span> <span class="n">error</span> <span class="k">as?</span> <span class="kt">SpotifyAuthorizationError</span><span class="p">,</span> <span class="n">authError</span><span class="o">.</span><span class="n">accessWasDenied</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"The user denied the authorization request"</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"couldn't authorize application: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p>Once this publisher completes successfully, your application is authorized and you may begin making requests to the Spotify web API. <strong>Ensure that you generate a new value for the state parameter before making another authorization request</strong>. The access token will be refreshed automatically when necessary. For example:</p>
<pre class="highlight swift"><code><span class="n">spotify</span><span class="o">.</span><span class="nf">currentUserPlaylists</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">extendPages</span><span class="p">(</span><span class="n">spotify</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span>
        <span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">completion</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">results</span> <span class="k">in</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p>This authorization process is fully implemented in this <a href="https://github.com/Peter-Schorn/SpotifyAPIExampleApp#how-the-authorization-process-works">example app</a>. The full documentation for all of the endpoints can be found <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/SpotifyAPI.html">here</a>. You are also encouraged to read the <a href="https://developer.spotify.com/documentation/web-api/reference/">Spotify web API reference</a>.</p>
<h2 id='authorizing-with-the-client-credentials-flow' class='heading'>Authorizing with the Client Credentials Flow</h2>

<p>Create an instance of <code><a href="Classes/SpotifyAPI.html">SpotifyAPI</a></code> and assign an instance of <code><a href="Classes/ClientCredentialsFlowManager.html">ClientCredentialsFlowManager</a></code> to the <code>authorizationManager</code> property:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">SpotifyWebAPI</span>

<span class="k">let</span> <span class="nv">spotify</span> <span class="o">=</span> <span class="kt">SpotifyAPI</span><span class="p">(</span>
    <span class="nv">authorizationManager</span><span class="p">:</span> <span class="kt">ClientCredentialsFlowManager</span><span class="p">(</span>
        <span class="nv">clientId</span><span class="p">:</span> <span class="s">"Your Client Id"</span><span class="p">,</span> <span class="nv">clientSecret</span><span class="p">:</span> <span class="s">"Your Client Secret"</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>

<p>To authorize your application, call <code>authorize()</code>:</p>
<pre class="highlight swift"><code><span class="n">spotify</span><span class="o">.</span><span class="n">authorizationManager</span><span class="o">.</span><span class="nf">authorize</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">completion</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="nv">finished</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"successfully authorized application"</span><span class="p">)</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"could not authorize application: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
    <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p>See the full documentation for <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/ClientCredentialsFlowManager.html#/s:13SpotifyWebAPI28ClientCredentialsFlowManagerC9authorize7Combine12AnyPublisherVyyts5Error_pGyF">authorize</a>.</p>

<p>Once this publisher completes successfully, your application is authorized and you may begin making requests to the Spotify web API. The access token will be refreshed automatically when necessary. For example:</p>
<pre class="highlight swift"><code><span class="n">spotify</span><span class="o">.</span><span class="nf">search</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="s">"Pink Floyd"</span><span class="p">,</span> <span class="nv">categories</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">track</span><span class="p">])</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span>
        <span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">completion</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">results</span> <span class="k">in</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p>This authorization process is implemented in this <a href="https://github.com/Peter-Schorn/SpotifyAPIExamples">example command-line app</a>. The full documentation for all of the endpoints can be found <a href="https://peter-schorn.github.io/SpotifyAPI/Classes/SpotifyAPI.html">here</a>. You are also encouraged to read the <a href="https://developer.spotify.com/documentation/web-api/reference/">Spotify web API reference</a>.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2020-12-31)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
